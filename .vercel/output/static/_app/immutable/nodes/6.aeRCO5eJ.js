import{s as F,k as z,l as B,i as k,f as h,e as g,a as A,c as v,b as P,g as E,o as d,r as T,h as _,u as L,p as N,v as H,w as M,t as w,d as y,m as S,j as I}from"../chunks/scheduler.AmCVIchs.js";import{S as Z,i as G,c as J,a as K,m as Q,t as W,b as X,d as $}from"../chunks/index.-Ukn1yxz.js";import{A as x}from"../chunks/AuthCheck.BYQiuIha.js";import{u as ee,b as te,f as R,h as D,i as se,w as le}from"../chunks/firebase.8j1TfjjC.js";function ne(a){let e,s,n,t,l,r,b,m,C,c=a[1]&&O(a),u=!a[3]&&a[5]&&V(),p=a[3]&&!a[2]&&!a[1]&&Y(a),o=a[3]&&a[2]&&j(a);return{c(){e=g("form"),s=g("input"),n=A(),t=g("div"),c&&c.c(),l=A(),u&&u.c(),r=A(),p&&p.c(),b=A(),o&&o.c(),this.h()},l(i){e=v(i,"FORM",{class:!0});var f=P(e);s=v(f,"INPUT",{type:!0,placeholder:!0,class:!0}),n=E(f),t=v(f,"DIV",{class:!0});var U=P(t);c&&c.l(U),l=E(U),u&&u.l(U),r=E(U),p&&p.l(U),b=E(U),o&&o.l(U),U.forEach(h),f.forEach(h),this.h()},h(){d(s,"type","text"),d(s,"placeholder","Username"),d(s,"class","input w-full"),T(s,"input-error",!a[3]&&a[5]),T(s,"input-warning",a[4]),T(s,"input-success",a[2]&&a[3]&&!a[1]),d(t,"class","my-4 min-h-16 px-8 w-full"),d(e,"class","w-5/6 sm:w-3/6")},m(i,f){k(i,e,f),_(e,s),L(s,a[0]),_(e,n),_(e,t),c&&c.m(t,null),_(t,l),u&&u.m(t,null),_(t,r),p&&p.m(t,null),_(t,b),o&&o.m(t,null),m||(C=[N(s,"input",a[9]),N(s,"input",a[7]),N(e,"submit",H(a[8]))],m=!0)},p(i,f){f&1&&s.value!==i[0]&&L(s,i[0]),f&40&&T(s,"input-error",!i[3]&&i[5]),f&16&&T(s,"input-warning",i[4]),f&14&&T(s,"input-success",i[2]&&i[3]&&!i[1]),i[1]?c?c.p(i,f):(c=O(i),c.c(),c.m(t,l)):c&&(c.d(1),c=null),!i[3]&&i[5]?u||(u=V(),u.c(),u.m(t,r)):u&&(u.d(1),u=null),i[3]&&!i[2]&&!i[1]?p?p.p(i,f):(p=Y(i),p.c(),p.m(t,b)):p&&(p.d(1),p=null),i[3]&&i[2]?o?o.p(i,f):(o=j(i),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(i){i&&h(e),c&&c.d(),u&&u.d(),p&&p.d(),o&&o.d(),m=!1,M(C)}}}function ae(a){let e,s,n,t,l=a[6].username+"",r,b,m,C="*Usernames cannot be changed*",c,u,p="Upload Profile Image";return{c(){e=g("h2"),s=w("Your username is "),n=g("span"),t=w("@"),r=w(l),b=A(),m=g("p"),m.textContent=C,c=A(),u=g("a"),u.textContent=p,this.h()},l(o){e=v(o,"H2",{class:!0});var i=P(e);s=y(i,"Your username is "),n=v(i,"SPAN",{class:!0});var f=P(n);t=y(f,"@"),r=y(f,l),f.forEach(h),i.forEach(h),b=E(o),m=v(o,"P",{class:!0,"data-svelte-h":!0}),S(m)!=="svelte-14cbc0k"&&(m.textContent=C),c=E(o),u=v(o,"A",{href:!0,class:!0,"data-svelte-h":!0}),S(u)!=="svelte-1xyzfcd"&&(u.textContent=p),this.h()},h(){d(n,"class","text-green-500"),d(e,"class","text-lg sm:text-xl font-semibold text-white -mb-2"),d(m,"class","mb-3 text-red-500"),d(u,"href","/login/photo"),d(u,"class","btn btn-primary px-10 text-white font-semibold sm:text-lg")},m(o,i){k(o,e,i),_(e,s),_(e,n),_(n,t),_(n,r),k(o,b,i),k(o,m,i),k(o,c,i),k(o,u,i)},p(o,i){i&64&&l!==(l=o[6].username+"")&&I(r,l)},d(o){o&&(h(e),h(b),h(m),h(c),h(u))}}}function O(a){let e,s,n,t;return{c(){e=g("p"),s=w("Checking availability of @"),n=w(a[0]),t=w("..."),this.h()},l(l){e=v(l,"P",{class:!0});var r=P(e);s=y(r,"Checking availability of @"),n=y(r,a[0]),t=y(r,"..."),r.forEach(h),this.h()},h(){d(e,"class","text-secondary")},m(l,r){k(l,e,r),_(e,s),_(e,n),_(e,t)},p(l,r){r&1&&I(n,l[0])},d(l){l&&h(e)}}}function V(a){let e,s="must be 3-16 characters long, alphanumeric only";return{c(){e=g("p"),e.textContent=s,this.h()},l(n){e=v(n,"P",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1wurl8l"&&(e.textContent=s),this.h()},h(){d(e,"class","text-error text-sm")},m(n,t){k(n,e,t)},d(n){n&&h(e)}}}function Y(a){let e,s,n,t;return{c(){e=g("p"),s=w("@"),n=w(a[0]),t=w(" is not available"),this.h()},l(l){e=v(l,"P",{class:!0});var r=P(e);s=y(r,"@"),n=y(r,a[0]),t=y(r," is not available"),r.forEach(h),this.h()},h(){d(e,"class","text-warning text-sm")},m(l,r){k(l,e,r),_(e,s),_(e,n),_(e,t)},p(l,r){r&1&&I(n,l[0])},d(l){l&&h(e)}}}function j(a){let e,s,n;return{c(){e=g("button"),s=w("Confirm Username @"),n=w(a[0]),this.h()},l(t){e=v(t,"BUTTON",{class:!0});var l=P(e);s=y(l,"Confirm Username @"),n=y(l,a[0]),l.forEach(h),this.h()},h(){d(e,"class","btn btn-success text-white")},m(t,l){k(t,e,l),_(e,s),_(e,n)},p(t,l){l&1&&I(n,t[0])},d(t){t&&h(e)}}}function ie(a){let e;function s(l,r){return l[6]?.username?ae:ne}let n=s(a),t=n(a);return{c(){t.c(),e=B()},l(l){t.l(l),e=B()},m(l,r){t.m(l,r),k(l,e,r)},p(l,r){n===(n=s(l))&&t?t.p(l,r):(t.d(1),t=n(l),t&&(t.c(),t.m(e.parentNode,e)))},d(l){l&&h(e),t.d(l)}}}function re(a){let e,s;return e=new x({props:{$$slots:{default:[ie]},$$scope:{ctx:a}}}),{c(){J(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,t){Q(e,n,t),s=!0},p(n,[t]){const l={};t&4223&&(l.$$scope={dirty:t,ctx:n}),e.$set(l)},i(n){s||(W(e.$$.fragment,n),s=!0)},o(n){X(e.$$.fragment,n),s=!1},d(n){$(e,n)}}}const oe=/^(?=[a-zA-Z0-9._]{3,16}$)(?!.*[_.]{2})[^_.].*[^_.]$/;function ue(a,e,s){let n,t,l,r,b;z(a,ee,f=>s(11,r=f)),z(a,te,f=>s(6,b=f));let m="",C=!1,c=!1,u;async function p(){s(2,c=!1),s(1,C=!0),clearTimeout(u),u=setTimeout(async()=>{console.log("Checking availability of ",m);const f=R(D,"usernames",m),U=await se(f).then(q=>q.exists());s(2,c=!U),s(1,C=!1)},500)}async function o(){const f=le(D);f.set(R(D,"usernames",m),{uid:r?.uid}),f.set(R(D,"users",r.uid),{username:m,photoURL:r?.photoURL??null,published:!0,bio:"I am a software developer",links:[{title:"Upwork",url:"https://upwork.com",icon:"custom"}]}),f.commit(),s(0,m=""),s(2,c=!1)}function i(){m=this.value,s(0,m)}return a.$$.update=()=>{a.$$.dirty&1&&s(3,n=m?.length>2&&m.length<16&&oe.test(m)),a.$$.dirty&1&&s(5,t=m.length>0),a.$$.dirty&14&&s(4,l=n&&!c&&!C)},[m,C,c,n,l,t,b,p,o,i]}class he extends Z{constructor(e){super(),G(this,e,ue,re,F,{})}}export{he as component};
