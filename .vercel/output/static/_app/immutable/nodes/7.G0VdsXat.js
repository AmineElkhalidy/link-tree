import{k as he,q as _e,l as pe,m as ge,n as be,h as ve,b as xe,j as ke,a as we}from"../chunks/firebase.8j1TfjjC.js";import{H as Ee,g as Le}from"../chunks/entry.kpip1UXu.js";import{s as ye,e as d,a as j,t as H,G as Ue,c as h,f as _,g as T,b as w,d as M,m as oe,o as i,q as le,h as r,i as re,p as je,j as ie,H as Te,k as qe,I as Ce}from"../chunks/scheduler.AmCVIchs.js";import{S as De,i as Re,t as N,e as Se,b as W,c as Ie,a as Oe,m as $e,d as Ae,g as Pe}from"../chunks/index.-Ukn1yxz.js";import{e as ce,U as He,g as Me,a as Ne}from"../chunks/UserLink.MFJhICy_.js";function ue(o,a){throw new Ee(o,a)}new TextEncoder;const Ve=async({params:o})=>{const a=he(ve,"users"),c=_e(a,ge("username","==",o.username),pe(1)),u=await be(c),m=u.docs[0]?.exists(),e=u.docs[0]?.data();if(!m)throw ue(404,"That user does not exist in our database!");if(!e.published)throw ue(403,`The profile of @${e.username} is not public!`);return{username:e.username,photoURL:e.photoURL,bio:e.bio,links:e.links??[]}},Qe=Object.freeze(Object.defineProperty({__proto__:null,load:Ve},Symbol.toStringTag,{value:"Module"}));function me(o,a,c){const u=o.slice();return u[4]=a[c],u}function fe(o){let a,c;const u=[o[4]];let m={};for(let e=0;e<u.length;e+=1)m=Ce(m,u[e]);return a=new He({props:m}),{c(){Ie(a.$$.fragment)},l(e){Oe(a.$$.fragment,e)},m(e,f){$e(a,e,f),c=!0},p(e,f){const p=f&1?Me(u,[Ne(e[4])]):{};a.$set(p)},i(e){c||(N(a.$$.fragment,e),c=!0)},o(e){W(a.$$.fragment,e),c=!1},d(e){Ae(a,e)}}}function Be(o){let a,c,u,m,e,f,p,R=o[0].username+"",I,V,q,g,O,B,C,S=(o[0].bio??"No bio yet...")+"",$,G,E,L,X="Your social links:",z,y,Y,v,x,F,J,k,Z="Sign Out",b,K,ee;document.title=u="@"+o[0].username+" Links";let U=ce(o[0].links),n=[];for(let t=0;t<U.length;t+=1)n[t]=fe(me(o,U,t));const de=t=>W(n[t],1,1,()=>{n[t]=null});return{c(){a=d("meta"),m=j(),e=d("main"),f=d("h1"),p=H("@"),I=H(R),V=j(),q=d("div"),g=d("img"),B=j(),C=d("p"),$=H(S),G=j(),E=d("div"),L=d("p"),L.textContent=X,z=j(),y=d("ul");for(let t=0;t<n.length;t+=1)n[t].c();Y=j(),v=d("div"),x=d("a"),F=H("Add a Link"),J=j(),k=d("button"),k.textContent=Z,this.h()},l(t){const l=Ue("svelte-kxq3ok",document.head);a=h(l,"META",{name:!0,content:!0}),l.forEach(_),m=T(t),e=h(t,"MAIN",{class:!0});var s=w(e);f=h(s,"H1",{class:!0});var D=w(f);p=M(D,"@"),I=M(D,R),D.forEach(_),V=T(s),q=h(s,"DIV",{class:!0});var te=w(q);g=h(te,"IMG",{src:!0,alt:!0,width:!0,class:!0}),te.forEach(_),B=T(s),C=h(s,"P",{class:!0});var se=w(C);$=M(se,S),se.forEach(_),G=T(s),E=h(s,"DIV",{});var A=w(E);L=h(A,"P",{class:!0,"data-svelte-h":!0}),oe(L)!=="svelte-1w37t3"&&(L.textContent=X),z=T(A),y=h(A,"UL",{class:!0});var ae=w(y);for(let Q=0;Q<n.length;Q+=1)n[Q].l(ae);ae.forEach(_),A.forEach(_),Y=T(s),v=h(s,"DIV",{class:!0});var P=w(v);x=h(P,"A",{href:!0,class:!0});var ne=w(x);F=M(ne,"Add a Link"),ne.forEach(_),J=T(P),k=h(P,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(k)!=="svelte-1gfjwpt"&&(k.textContent=Z),P.forEach(_),s.forEach(_),this.h()},h(){i(a,"name","description"),i(a,"content",c=o[0].bio),i(f,"class","text-3xl sm:text-5xl md:text-6xl text-green-500"),le(g.src,O=o[0].photoURL??"/profile.webp")||i(g,"src",O),i(g,"alt","Pic URL"),i(g,"width","256"),i(g,"class","mx-auto rounded-full border border-green-500"),i(q,"class","my-6"),i(C,"class","text-lg sm:text-xl my-8 text-white"),i(L,"class","text-lg mb-2"),i(y,"class","list-none mb-6 flex flex-col justify-center items-center gap-4"),i(x,"href",o[1]),i(x,"class","btn btn-outline btn-info mx-auto my-4 px-10"),i(k,"class","btn btn-error px-10 text-white font-semibold sm:text-lg"),i(v,"class","flex flex-col justify-center items-center mb-8 gap-16"),i(e,"class","prose text-center mx-auto mt-16")},m(t,l){r(document.head,a),re(t,m,l),re(t,e,l),r(e,f),r(f,p),r(f,I),r(e,V),r(e,q),r(q,g),r(e,B),r(e,C),r(C,$),r(e,G),r(e,E),r(E,L),r(E,z),r(E,y);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(y,null);r(e,Y),r(e,v),r(v,x),r(x,F),r(v,J),r(v,k),b=!0,K||(ee=je(k,"click",o[2]),K=!0)},p(t,[l]){if((!b||l&1&&c!==(c=t[0].bio))&&i(a,"content",c),(!b||l&1)&&u!==(u="@"+t[0].username+" Links")&&(document.title=u),(!b||l&1)&&R!==(R=t[0].username+"")&&ie(I,R),(!b||l&1&&!le(g.src,O=t[0].photoURL??"/profile.webp"))&&i(g,"src",O),(!b||l&1)&&S!==(S=(t[0].bio??"No bio yet...")+"")&&ie($,S),l&1){U=ce(t[0].links);let s;for(s=0;s<U.length;s+=1){const D=me(t,U,s);n[s]?(n[s].p(D,l),N(n[s],1)):(n[s]=fe(D),n[s].c(),N(n[s],1),n[s].m(y,null))}for(Pe(),s=U.length;s<n.length;s+=1)de(s);Se()}(!b||l&2)&&i(x,"href",t[1])},i(t){if(!b){for(let l=0;l<U.length;l+=1)N(n[l]);b=!0}},o(t){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)W(n[l]);b=!1},d(t){t&&(_(m),_(e)),_(a),Te(n,t),K=!1,ee()}}}function Ge(o,a,c){let u,m;qe(o,xe,p=>c(3,m=p));const e=async()=>{await fetch("/api/signin",{method:"DELETE"}),await ke(we),Le("/login")};let{data:f}=a;return o.$$set=p=>{"data"in p&&c(0,f=p.data)},o.$$.update=()=>{o.$$.dirty&8&&c(1,u=`/${m?.username}/edit`)},[f,u,e,m]}class We extends De{constructor(a){super(),Re(this,a,Ge,Be,ye,{data:0})}}export{We as component,Qe as universal};
