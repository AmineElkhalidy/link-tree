import{s as W,e as p,t as w,a as S,c as d,b as g,d as P,f as _,g as D,m as G,o as f,i as Z,h as r,D as $,j as I,n as K,k as tt}from"../chunks/scheduler.AmCVIchs.js";import{S as et,i as at}from"../chunks/index.-Ukn1yxz.js";import{p as rt}from"../chunks/stores.9Baz8Pbk.js";import{p as st,i as ot,a as nt}from"../chunks/entry.kpip1UXu.js";function lt(e){const t=JSON.parse(e);return t.data&&(t.data=st(t.data)),t}function Q(e){return HTMLElement.prototype.cloneNode.call(e)}function it(e,t=()=>{}){const i=async({action:a,result:s,reset:c=!0,invalidateAll:u=!0})=>{s.type==="success"&&(c&&HTMLFormElement.prototype.reset.call(e),u&&await ot()),(location.origin+location.pathname===a.origin+a.pathname||s.type==="redirect"||s.type==="error")&&nt(s)};async function b(a){if((a.submitter?.hasAttribute("formmethod")?a.submitter.formMethod:Q(e).method)!=="post")return;a.preventDefault();const c=new URL(a.submitter?.hasAttribute("formaction")?a.submitter.formAction:Q(e).action),u=new FormData(e),h=a.submitter?.getAttribute("name");h&&u.append(h,a.submitter?.getAttribute("value")??"");const L=new AbortController;let E=!1;const M=await t({action:c,cancel:()=>E=!0,controller:L,formData:u,formElement:e,submitter:a.submitter})??i;if(E)return;let l;try{const n=await fetch(c,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:u,signal:L.signal});l=lt(await n.text()),l.type==="error"&&(l.status=n.status)}catch(n){if(n?.name==="AbortError")return;l={type:"error",error:n}}M({action:c,formData:u,formElement:e,update:n=>i({action:c,result:l,reset:n?.reset,invalidateAll:n?.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",b),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",b)}}}function ct(e){let t,i,b,a,s=e[0].bio+"",c,u,h,L,E=e[1].status+"",C,M,l,n=(e[1].form?.problem??"")+"",H,N,v,y,A,z='<span class="label-text">Your bio</span>',O,x,k,R,T,J="Update Bio",U,V;return{c(){t=p("main"),i=p("p"),b=w("Current Bio: "),a=p("span"),c=w(s),u=S(),h=p("p"),L=w("Status Code: "),C=w(E),M=S(),l=p("p"),H=w(n),N=S(),v=p("form"),y=p("div"),A=p("label"),A.innerHTML=z,O=S(),x=p("textarea"),R=S(),T=p("button"),T.textContent=J,this.h()},l(m){t=d(m,"MAIN",{class:!0});var o=g(t);i=d(o,"P",{});var j=g(i);b=P(j,"Current Bio: "),a=d(j,"SPAN",{class:!0});var X=g(a);c=P(X,s),X.forEach(_),j.forEach(_),u=D(o),h=d(o,"P",{});var q=g(h);L=P(q,"Status Code: "),C=P(q,E),q.forEach(_),M=D(o),l=d(o,"P",{class:!0});var Y=g(l);H=P(Y,n),Y.forEach(_),N=D(o),v=d(o,"FORM",{method:!0});var B=g(v);y=d(B,"DIV",{class:!0});var F=g(y);A=d(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(A)!=="svelte-p13vsy"&&(A.innerHTML=z),O=D(F),x=d(F,"TEXTAREA",{name:!0,class:!0}),g(x).forEach(_),F.forEach(_),R=D(B),T=d(B,"BUTTON",{class:!0,"data-svelte-h":!0}),G(T)!=="svelte-tqnit3"&&(T.textContent=J),B.forEach(_),o.forEach(_),this.h()},h(){f(a,"class","text-info"),f(l,"class","text-error"),f(A,"for","bio"),f(A,"class","label"),f(x,"name","bio"),f(x,"class","textarea textarea-bordered textarea-accent"),x.value=k=e[0].bio,f(y,"class","form-control"),f(T,"class","btn btn-primary my-5"),f(v,"method","POST"),f(t,"class","max-w-lg prose text-center mx-auto my-6")},m(m,o){Z(m,t,o),r(t,i),r(i,b),r(i,a),r(a,c),r(t,u),r(t,h),r(h,L),r(h,C),r(t,M),r(t,l),r(l,H),r(t,N),r(t,v),r(v,y),r(y,A),r(y,O),r(y,x),r(v,R),r(v,T),U||(V=$(it.call(null,v)),U=!0)},p(m,[o]){o&1&&s!==(s=m[0].bio+"")&&I(c,s),o&2&&E!==(E=m[1].status+"")&&I(C,E),o&2&&n!==(n=(m[1].form?.problem??"")+"")&&I(H,n),o&1&&k!==(k=m[0].bio)&&(x.value=k)},i:K,o:K,d(m){m&&_(t),U=!1,V()}}}function ut(e,t,i){let b;tt(e,rt,s=>i(1,b=s));let{data:a}=t;return e.$$set=s=>{"data"in s&&i(0,a=s.data)},[a,b]}class bt extends et{constructor(t){super(),at(this,t,ut,ct,W,{data:0})}}export{bt as component};
